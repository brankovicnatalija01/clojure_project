{"version":3,"sources":["cljs_project/components/login_form.cljs"],"mappings":";AAKA,2CAAA,3CAAMA,8FAAOC,QAAQC;AAArB,AAAA,0FAAA,mDAAA,2CAAA,uDAAA,wCAAA,mEAAA,oDAAA,4EAAA,uDAAA,2DAAA,4EAAA,0DAAA,8DAAA,yDAAA,uDAAA,SAAA,IAAA,qBAAA,OAAA,OAAA,SAAA,OAAA,QAAA,OAAA,cAAA,mFAAA,mDAAA,2CAAA,uDAAA,2CAAA,4EAAA,QAAA,2DAAA,OAAA,sEAAA,OAAA,iEAAA,4BAAA,uDAAA,QAAA,iEAAA,yBAAA,mFAAA,8CAAA,2CAAA,uDAAA,2CAAA,gEAAA,OAAA,sEAAA,uCAAA,mFAAA,yDAAA,2CAAA,sEAAA,uDAAA,2CAAA,2DAAA,YAAA,4EAAA,UAAA,uDAAA,QAAA,yDAAA,OAAA,sEAAA,MAAA,yDAAA,0BAAA,1yBAkByCD,oQACjBC;;AAQxB,gDAAA,hDAAMC;AAAN,AACE,IAAMC,WAAS,gDAAA,hDAACC;IACVC,WAAS,gDAAA,hDAACD;IACVE,gBAAc,gDAAA,hDAACF;AAFrB,AAGE;AAAA,AAAA,0FAAA,mDAAA,2CAAA,uDAAA,2CAAA,0DAAA,OAAA,4EAAA,SAAA,mEAAA,SAAA,yDAAA,QAAA,4EAAA,0BAAA,mFAAA,mDAAA,2CAAA,uDAAA,2CAAA,uDAAA,QAAA,2DAAA,OAAA,sEAAA,OAAA,iEAAA,4BAAA,4EAAA,wBAAA,mFAAA,kDAAA,2CAAA,uDAAA,2CAAA,iEAAA,SAAA,sEAAA,uBAAA,gBAAA,mFAAA,sDAAA,2CAAA,+DAauB,WAAKM;AAAL,AACE,AAAiBA;;AACjB,2DAAA,oFAAA,2CAAA,wDAAA,2CAAA,6DAAA,AAAAH,0BAAA,4DAAA,AAAAA,kCAAA,0DAAA,qDAAA,2EAAA,mDAAA,2DAAA,2CAAA,eAAA,2BAAA,x0BAACI,mWAC0BR,sFAAoBE,0cAI/B,WAAKO;AAAL,AACE,oCAAA,pCAACC,sBAAOP;;AACR,4EAAA,rEAACO,sBAAOC;GAP1B,uEAQsB,WAAKF;AAAL,AACE,2CAAA,pCAACC,sBAAOP;;WAxBzD,mFAAA,mDAAA,2CAAA,uDAAA,2CAAA,sEAAA,uBAAA,mFAAA,uDAAA,2CAAA,uDAAA,2CAAA,0DAAA,QAAA,sEAAA,sBAAA,mBAAA,mFAAA,sDAAA,2CAAA,qDAAA,OAAA,sDAAA,AAAAC,0BAAA,+DAAA,WAAAC,pFA6BuBL;AA7BvB,AA8B2B,OAACU,sBAAOV,SAAS,AAAA,AAAAK;GA9B5C,uDAAA,2CAAA,uDAAA,MAAA,2DAAA,OAAA,yDAAA,iBAAA,sEAAA,sCAAA,mFAAA,mDAAA,2CAAA,uDAAA,2CAAA,sEAAA,uBAAA,mFAAA,uDAAA,2CAAA,uDAAA,2CAAA,0DAAA,QAAA,sEAAA,sBAAA,mBAAA,mFAAA,sDAAA,2CAAA,qDAAA,WAAA,sDAAA,AAAAD,0BAAA,+DAAA,WAAAE,pFAuCuBJ;AAvCvB,AAwC2B,OAACQ,sBAAOR,SAAS,AAAA,AAAAI;GAxC5C,uDAAA,2CAAA,uDAAA,MAAA,2DAAA,OAAA,oEAAA,OAAA,yDAAA,iBAAA,sEAAA,sCAAA,mFAAA,yDAAA,2CAAA,qDAAA,SAAA,uDAAA,2CAAA,uDAAA,OAAA,2DAAA,OAAA,4EAAA,UAAA,uDAAA,QAAA,yDAAA,OAAA,sEAAA,MAAA,yDAAA,0BAAA,gCAsDI,kBAAA,AAAAF,gCAAA,AAAA,4HAAA,AAAAA,+BAAA,3KAAOD,mGACJP,yDAAOO;AADV,AACyB,2CAAA,pCAACO,sBAAOP;WADjC","names":["cljs-project.components.login-form/modal","message","on-close","cljs-project.components.login-form/login-form","username","reagent.core.atom","password","modal-message","cljs.core/deref","p1__11922#","p1__11923#","e","ajax.core.POST","_","cljs.core/reset!","cljs-project.components.app-state/current-page"],"sourcesContent":["(ns cljs-project.components.login-form\n  (:require [reagent.core :as r]\n            [ajax.core :refer [POST]]\n            [cljs-project.components.app-state :refer [current-page]]))\n\n(defn modal [message on-close]\n  [:div {:style {:position \"fixed\"\n                 :top 0\n                 :left 0\n                 :width \"100%\"\n                 :height \"100%\"\n                 :background-color \"rgba(0, 0, 0, 0.5)\"\n                 :display \"flex\"\n                 :justify-content \"center\"\n                 :align-items \"center\"\n                 :z-index 1000}}\n   [:div {:style {:background-color \"white\"\n                  :padding \"20px\"\n                  :border-radius \"10px\"\n                  :box-shadow \"0 4px 8px rgba(0,0,0,0.2)\"\n                  :width \"300px\"\n                  :text-align \"center\"}}\n    [:p {:style {:font-size \"16px\"\n                 :margin-bottom \"20px\"}} message]\n    [:button {:on-click on-close\n              :style {:padding \"10px 20px\"\n                      :background-color \"#007BFF\"\n                      :color \"white\"\n                      :border \"none\"\n                      :border-radius \"5px\"\n                      :cursor \"pointer\"}} \"OK\"]]])\n\n(defn login-form []\n  (let [username (r/atom \"\")\n        password (r/atom \"\")\n        modal-message (r/atom nil)]\n    (fn []\n      [:div {:style {:display \"flex\"\n                     :justify-content \"center\"\n                     :align-items \"center\"\n                     :height \"100vh\"\n                     :background-color \"#f5f5f5\"}}\n       [:div {:style {:width \"350px\"\n                      :padding \"20px\"\n                      :border-radius \"10px\"\n                      :box-shadow \"0 4px 8px rgba(0,0,0,0.2)\"\n                      :background-color \"white\"}}\n        [:h1 {:style {:text-align \"center\"\n                      :margin-bottom \"20px\"}} \"Login\"]\n        [:form {:on-submit (fn [e]\n                             (.preventDefault e)\n                             (POST \"http://localhost:4000/api/login\"\n                                   {:params {:username @username :password @password}\n                                    :format :json\n                                    :response-format :raw\n                                    :headers {\"Content-Type\" \"application/json\"}\n                                    :handler (fn [_]\n                                               (reset! modal-message \"Successfully logged in!\")\n                                               (reset! current-page :home)) \n                                    :error-handler (fn [_]\n                                                     (reset! modal-message \"Invalid username or password.\"))}))}\n         [:div {:style {:margin-bottom \"15px\"}}\n          [:label {:style {:display \"block\"\n                           :margin-bottom \"5px\"}} \"Username\"]\n          [:input {:type \"text\"\n                   :value @username\n                   :on-change #(reset! username (-> % .-target .-value))\n                   :style {:width \"94%\"\n                           :padding \"10px\"\n                           :border \"1px solid #ccc\"\n                           :border-radius \"5px\"}}]]\n         [:div {:style {:margin-bottom \"15px\"}}\n          [:label {:style {:display \"block\"\n                           :margin-bottom \"5px\"}} \"Password\"]\n          [:input {:type \"password\"\n                   :value @password\n                   :on-change #(reset! password (-> % .-target .-value))\n                   :style {:width \"94%\"\n                           :padding \"10px\"\n                           :margin-right \"10px\"\n                           :border \"1px solid #ccc\"\n                           :border-radius \"5px\"}}]]\n         [:button {:type \"submit\"\n                   :style {:width \"100%\"\n                           :padding \"10px\"\n                           :background-color \"#007BFF\"\n                           :color \"white\"\n                           :border \"none\"\n                           :border-radius \"5px\"\n                           :cursor \"pointer\"}} \"Login\"]]]\n        (when @modal-message\n          [modal @modal-message #(reset! modal-message nil)])])))\n"]}